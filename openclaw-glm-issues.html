<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenClaw GLM æ¨¡å‹é…ç½®é—®é¢˜æ±‡æ€»</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            line-height: 1.8;
            padding: 40px 20px;
        }
        .container { max-width: 900px; margin: 0 auto; }
        header {
            text-align: center;
            margin-bottom: 50px;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            border: 1px solid rgba(233, 69, 96, 0.3);
        }
        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, #e94560, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .subtitle { color: #888; }
        .section {
            background: rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 4px solid #e94560;
        }
        h2 {
            color: #fff;
            font-size: 1.4rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h2::before { content: "â–¸"; color: #e94560; }
        h3 {
            color: #ff6b6b;
            font-size: 1.1rem;
            margin: 20px 0 15px;
        }
        .error-box {
            background: rgba(233, 69, 96, 0.1);
            border: 1px solid rgba(233, 69, 96, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            color: #ff6b6b;
        }
        .solution-box {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .solution-box h4 {
            color: #4caf50;
            margin-bottom: 10px;
        }
        .official-box {
            background: rgba(33, 150, 243, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .official-box h4 {
            color: #2196f3;
            margin-bottom: 10px;
        }
        code {
            background: rgba(0,0,0,0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #ffd700;
        }
        pre {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 10px 0;
        }
        pre code {
            background: none;
            padding: 0;
        }
        ul { list-style: none; padding-left: 0; }
        li {
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
            color: #b0b0b0;
        }
        li::before {
            content: "â€¢";
            color: #e94560;
            position: absolute;
            left: 0;
        }
        .highlight { color: #ffd700; font-weight: 600; }
        .warning {
            background: rgba(255, 152, 0, 0.1);
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .tip {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            color: #666;
            font-size: 0.85rem;
        }
        a {
            color: #e94560;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        @media (max-width: 600px) {
            h1 { font-size: 1.5rem; }
            .section { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>OpenClaw GLM æ¨¡å‹é…ç½®é—®é¢˜æ±‡æ€»</h1>
            <p class="subtitle">æ™ºè°± AI GLM æ¨¡å‹åœ¨ OpenClaw ä¸­çš„å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ<br><small>åŸºäºå®˜æ–¹æ–‡æ¡£ä¸å®é™…ä½¿ç”¨ç»éªŒæ•´ç†</small></p>
        </header>

        <div class="section">
            <h2>é—®é¢˜èƒŒæ™¯</h2>
            <p>åœ¨ä½¿ç”¨ OpenClaw é…ç½®æ™ºè°± AI (Zhipu) çš„ GLM æ¨¡å‹æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ° <span class="highlight">"Unknown model"</span> æˆ– <span class="highlight">"Model is not allowed"</span> é”™è¯¯ã€‚æœ¬æ–‡æ¡£æ±‡æ€»äº†å®˜æ–¹ FAQ å’Œå®é™…è¸©å‘ç»éªŒï¼Œå¸®åŠ©ä½ å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚</p>
            
            <div class="tip">
                <strong>ğŸ’¡ å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š</strong><br>
                æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·æŸ¥é˜… OpenClaw å®˜æ–¹ FAQï¼š<a href="https://docs.openclaw.ai/help/faq" target="_blank">docs.openclaw.ai/help/faq</a>
            </div>
        </div>

        <div class="section">
            <h2>å¸¸è§é—®é¢˜ 1ï¼šæ¨¡å‹åç§°å‰ç¼€æ··ä¹±</h2>
            
            <h3>é”™è¯¯ç°è±¡</h3>
            <div class="error-box">
                âš ï¸ Agent failed before reply: Unknown model: zhipu/glm-4-flash
            </div>
            
            <h3>é—®é¢˜åŸå› </h3>
            <p>OpenClaw çš„æ¨¡å‹é…ç½®å­˜åœ¨å¤šç§å†™æ³•ï¼Œä¸åŒç‰ˆæœ¬å¯¹æ ¼å¼çš„æ”¯æŒä¸ä¸€è‡´ï¼š</p>
            <ul>
                <li><code>glm-4-flash</code> â€” ç®€æ´æ ¼å¼ï¼ˆæ¨èï¼‰</li>
                <li><code>zhipu/glm-4-flash</code> â€” å¸¦ provider å‰ç¼€ï¼ˆæŸäº›ç‰ˆæœ¬ä¸æ”¯æŒï¼‰</li>
            </ul>
            
            <div class="warning">
                <strong>æ³¨æ„ï¼š</strong>ä¸åŒç‰ˆæœ¬çš„ OpenClaw å¯¹è¿™ä¸¤ç§æ ¼å¼çš„æ”¯æŒä¸ä¸€è‡´ï¼Œæ··åˆä½¿ç”¨ä¼šå¯¼è‡´é”™è¯¯ã€‚å®˜æ–¹æ¨èåœ¨ models åˆ—è¡¨ä¸­åªä½¿ç”¨æ¨¡å‹åç§°ï¼Œä¸å¸¦ provider å‰ç¼€ã€‚
            </div>

            <div class="solution-box">
                <h4>âœ… è§£å†³æ–¹æ¡ˆ</h4>
                <p>ç»Ÿä¸€ä½¿ç”¨ç®€æ´æ ¼å¼ï¼Œå¹¶åœ¨ models ä¸­æ­£ç¡®å£°æ˜ï¼š</p>
                <pre><code>{
  "agents": {
    "defaults": {
      "model": {
        "primary": "glm-4-flash"
      },
      "models": {
        "glm-4-flash": {
          "alias": "GLM-4-Flash"
        },
        "glm-4-plus": {
          "alias": "GLM-4-Plus"
        }
      }
    }
  }
}</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>å¸¸è§é—®é¢˜ 2ï¼š"Model is not allowed" é”™è¯¯</h2>
            
            <h3>é”™è¯¯ç°è±¡</h3>
            <div class="error-box">
                âš ï¸ Model "xxx" is not allowed
            </div>
            
            <div class="official-box">
                <h4>ğŸ“– å®˜æ–¹è§£é‡Š</h4>
                <p>æ ¹æ® OpenClaw å®˜æ–¹ FAQï¼Œè¿™ä¸ªé”™è¯¯è¡¨ç¤ºé…ç½®çš„æ¨¡å‹ä¸åœ¨å…è®¸çš„æ¨¡å‹åˆ—è¡¨ä¸­ã€‚å¯èƒ½çš„åŸå› ï¼š</p>
                <ul>
                    <li>æ¨¡å‹åç§°æ‹¼å†™é”™è¯¯</li>
                    <li>æ¨¡å‹æœªåœ¨ <code>agents.defaults.models</code> ä¸­å®šä¹‰</li>
                    <li>ä½¿ç”¨äº† provider å‰ç¼€å¯¼è‡´è§£æå¤±è´¥</li>
                </ul>
            </div>

            <div class="solution-box">
                <h4>âœ… è§£å†³æ–¹æ¡ˆ</h4>
                <ol style="color: #b0b0b0; padding-left: 20px;">
                    <li style="padding-left: 10px;">æ£€æŸ¥æ¨¡å‹åç§°æ‹¼å†™ï¼Œç¡®ä¿ä¸å®˜æ–¹æ”¯æŒçš„æ¨¡å‹åç§°ä¸€è‡´</li>
                    <li style="padding-left: 10px;">åœ¨ <code>models</code> å¯¹è±¡ä¸­æ·»åŠ è¯¥æ¨¡å‹çš„å®šä¹‰</li>
                    <li style="padding-left: 10px;">ç§»é™¤æ¨¡å‹åç§°ä¸­çš„ provider å‰ç¼€ï¼ˆå¦‚ <code>zhipu/</code>ï¼‰</li>
                    <li style="padding-left: 10px;">é‡å¯ç½‘å…³ä½¿é…ç½®ç”Ÿæ•ˆï¼š<code>openclaw gateway restart</code></li>
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>å¸¸è§é—®é¢˜ 3ï¼šSession ç¼“å­˜å¯¼è‡´åˆ‡æ¢å¤±è´¥</h2>
            
            <h3>é”™è¯¯ç°è±¡</h3>
            <div class="error-box">
                ä¿®æ”¹é…ç½®ä¸º glm-4-flash åï¼Œé£ä¹¦å¯¹è¯ä»ç„¶æŠ¥é”™ï¼šUnknown model: zhipu/glm-4-flash
            </div>
            
            <div class="official-box">
                <h4>ğŸ“– å®˜æ–¹è§£é‡Š</h4>
                <p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼ŒOpenClaw çš„ session ä¼šç¼“å­˜æ¨¡å‹é…ç½®ã€‚å½“ channelï¼ˆå¦‚é£ä¹¦ã€Telegramï¼‰å·²ç»å»ºç«‹äº†ä½¿ç”¨ç‰¹å®šæ¨¡å‹çš„ session åï¼Œå³ä½¿ä¿®æ”¹é…ç½®ï¼Œå·²å­˜åœ¨çš„ session ä»ä¼šç»§ç»­ä½¿ç”¨æ—§çš„æ¨¡å‹é…ç½®ã€‚</p>
            </div>

            <div class="solution-box">
                <h4>âœ… è§£å†³æ–¹æ¡ˆ</h4>
                <p>éœ€è¦å½»åº•é‡å¯ç½‘å…³ï¼Œæ–­å¼€æ‰€æœ‰è¿æ¥ï¼š</p>
                <pre><code># åœæ­¢ç½‘å…³
openclaw gateway stop

# ç­‰å¾…å‡ ç§’ç¡®ä¿è¿›ç¨‹å®Œå…¨é€€å‡º

# å¯åŠ¨ç½‘å…³
openclaw gateway start

# æˆ–è€…ä½¿ç”¨ä¸€é”®é‡å¯
openclaw gateway restart</code></pre>
                
                <p style="margin-top: 15px;">å¦‚æœé—®é¢˜æŒç»­ï¼Œå¼ºåˆ¶æ€æ‰ node è¿›ç¨‹ï¼š</p>
                <pre><code># Windows
taskkill /F /IM "node.exe"
openclaw gateway start

# macOS/Linux
killall node
openclaw gateway start</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>å¸¸è§é—®é¢˜ 4ï¼šé…ç½®éªŒè¯å¤±è´¥</h2>
            
            <h3>é”™è¯¯ç°è±¡</h3>
            <div class="error-box">
                Invalid config at openclaw.json:
                - agents.defaults.models.glm-4-flash: Unrecognized key: "provider"
            </div>
            
            <h3>é—®é¢˜åŸå› </h3>
            <p>åœ¨ models é…ç½®ä¸­é”™è¯¯åœ°æ·»åŠ äº† <code>"provider": "zhipu"</code> å­—æ®µã€‚provider åº”è¯¥åœ¨ <code>auth.profiles</code> ä¸­å£°æ˜ï¼Œè€Œä¸æ˜¯åœ¨ models ä¸­ã€‚</p>

            <div class="solution-box">
                <h4>âœ… æ­£ç¡®é…ç½®</h4>
                <pre><code>{
  "auth": {
    "profiles": {
      "glm:default": {
        "provider": "zhipu",
        "mode": "api_key"
      }
    }
  },
  "agents": {
    "defaults": {
      "models": {
        "glm-4-flash": {
          "alias": "GLM-4-Flash"
          // âŒ ä¸è¦åœ¨è¿™é‡ŒåŠ  provider
        }
      }
    }
  }
}</code></pre>
                
                <p style="margin-top: 15px;">ä¿®å¤åè¿è¡Œ doctor æ¸…ç†é…ç½®ï¼š</p>
                <pre><code>openclaw doctor --fix</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>å¸¸è§é—®é¢˜ 5ï¼šé…ç½®è¢«è‡ªåŠ¨é‡ç½®</h2>
            
            <h3>é”™è¯¯ç°è±¡</h3>
            <div class="error-box">
                è¿è¡Œ openclaw doctor --fix åï¼Œé…ç½®è¢«è‡ªåŠ¨ä¿®æ”¹ï¼Œprimary æ¨¡å‹åˆå˜å› Kimi
            </div>
            
            <div class="official-box">
                <h4>ğŸ“– å®˜æ–¹è§£é‡Š</h4>
                <p>doctor å‘½ä»¤ä¼šå°è¯•"ä¿®å¤"é…ç½®ï¼Œæœ‰æ—¶ä¼šè¦†ç›–ç”¨æˆ·çš„æ‰‹åŠ¨ä¿®æ”¹ã€‚å»ºè®®ä½¿ç”¨ <code>--repair</code> å‚æ•°æ—¶è°¨æ…æ“ä½œã€‚</p>
            </div>

            <div class="solution-box">
                <h4>âœ… è§£å†³æ–¹æ¡ˆ</h4>
                <ul>
                    <li>ä¿®æ”¹é…ç½®å‰ï¼Œå…ˆå¤‡ä»½ openclaw.jsonï¼š<code>cp openclaw.json openclaw.json.bak</code></li>
                    <li>é¿å…é¢‘ç¹ä½¿ç”¨ <code>doctor --fix</code></li>
                    <li>æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ—¶ï¼Œä½¿ç”¨ <code>openclaw config patch</code> è€Œéç›´æ¥ä¿®æ”¹æ–‡ä»¶</li>
                    <li>å¦‚æœé…ç½®è¢«é‡ç½®ï¼Œä»å¤‡ä»½æ¢å¤ï¼š<code>cp openclaw.json.bak openclaw.json</code></li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>å®˜æ–¹æ¨èï¼šå¦‚ä½•åˆ‡æ¢æ¨¡å‹ï¼ˆä¸ä¸¢å¤±é…ç½®ï¼‰</h2>
            
            <div class="official-box">
                <h4>ğŸ“– å®˜æ–¹ FAQ æ‘˜å½•</h4>
                <p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œåˆ‡æ¢æ¨¡å‹çš„æ¨èæ–¹æ³•ï¼š</p>
                <pre><code># æŸ¥çœ‹å½“å‰æ¨¡å‹
openclaw config get agents.defaults.model

# è®¾ç½®æ–°æ¨¡å‹ï¼ˆä¸é‡å¯ï¼‰
openclaw config patch agents.defaults.model.primary="new-model-name"

# æˆ–è€…ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶åé‡å¯ç½‘å…³
openclaw gateway restart</code></pre>
            </div>
            
            <div class="tip">
                <strong>ğŸ’¡ é‡è¦æç¤ºï¼š</strong><br>
                åˆ‡æ¢æ¨¡å‹åï¼Œå·²å­˜åœ¨çš„ session ä¸ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ–°æ¨¡å‹ã€‚éœ€è¦ç­‰å¾… session è¶…æ—¶ï¼ˆé€šå¸¸ 30 åˆ†é’Ÿï¼‰æˆ–é‡å¯ç½‘å…³å¼ºåˆ¶æ–­å¼€æ‰€æœ‰ sessionã€‚
            </div>
        </div>

        <div class="section">
            <h2>æœ€ä½³å®è·µå»ºè®®</h2>
            
            <h3>1. å•ä¸€æ¨¡å‹ç­–ç•¥</h3>
            <p>å¦‚æœé¢‘ç¹é‡åˆ°æ¨¡å‹åˆ‡æ¢é—®é¢˜ï¼Œå»ºè®®åªé…ç½®ä¸€ä¸ªä¸»åŠ›æ¨¡å‹ï¼ˆå¦‚ Kimiï¼‰ï¼Œå½»åº•åˆ é™¤å…¶ä»–æ¨¡å‹é…ç½®ï¼Œé¿å…å†²çªã€‚</p>

            <h3>2. é…ç½®éªŒè¯</h3>
            <p>ä¿®æ”¹é…ç½®åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š</p>
            <pre><code># éªŒè¯é…ç½®æ ¼å¼
openclaw config validate

# æŸ¥çœ‹æ¨¡å‹çŠ¶æ€
openclaw models status

# è¿è¡Œè¯Šæ–­
openclaw doctor</code></pre>

            <h3>3. å¿«é€Ÿæ¢å¤è„šæœ¬</h3>
            <p>åœ¨æ¡Œé¢åˆ›å»ºé‡å¯è„šæœ¬ï¼Œå‡ºç°é—®é¢˜æ—¶å¿«é€Ÿæ¢å¤ï¼š</p>
            <pre><code>@echo off
echo é‡å¯ OpenClaw ç½‘å…³...
openclaw gateway restart
echo å®Œæˆï¼
pause</code></pre>

            <h3>4. ç›‘æ§å‘Šè­¦</h3>
            <p>è®¾ç½® HEARTBEAT.md å®šæœŸæ£€æŸ¥ï¼š</p>
            <pre><code># HEARTBEAT.md
## æ¯å°æ—¶æ£€æŸ¥
- [ ] æ£€æŸ¥ç½‘å…³çŠ¶æ€: openclaw gateway status
- [ ] æ£€æŸ¥æ¨¡å‹é…ç½®: openclaw config get agents.defaults.model
- [ ] å¦‚æœ‰å¼‚å¸¸ï¼Œå‘é€æé†’</code></pre>
        </div>

        <div class="section">
            <h2>æ›¿ä»£æ–¹æ¡ˆ</h2>
            <p>å¦‚æœ GLM é…ç½®é—®é¢˜æŒç»­æ— æ³•è§£å†³ï¼Œå¯ä»¥è€ƒè™‘ï¼š</p>
            
            <div class="official-box">
                <h4>ğŸ“– å®˜æ–¹æ”¯æŒçš„æ›¿ä»£æ–¹æ¡ˆ</h4>
                <ul>
                    <li><span class="highlight">Kimi (Moonshot)</span> â€” é…ç½®ç®€å•ï¼Œç¨³å®šæ€§å¥½ï¼Œå®˜æ–¹æ¨è</li>
                    <li><span class="highlight">Anthropic (Claude)</span> â€” æ”¯æŒ setup-token æˆ– API key</li>
                    <li><span class="highlight">OpenAI (Codex)</span> â€” æ”¯æŒ OAuth ç™»å½•</li>
                    <li><span class="highlight">OpenRouter</span> â€” æ”¯æŒå¤šç§æ¨¡å‹ï¼ŒåŒ…æ‹¬ GLMã€Kimi ç­‰</li>
                    <li><span class="highlight">æœ¬åœ°æ¨¡å‹</span> â€” Ollamaã€LM Studio ç­‰ï¼Œæ•°æ®å®Œå…¨æœ¬åœ°</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>å¿«é€Ÿè¯Šæ–­å‘½ä»¤</h2>
            
            <div class="official-box">
                <h4>ğŸ“– å®˜æ–¹æ¨èçš„æ•…éšœæ’æŸ¥æµç¨‹ï¼ˆFirst 60 secondsï¼‰</h4>
                <pre><code># 1. å¿«é€ŸçŠ¶æ€æ£€æŸ¥
openclaw status

# 2. è¯¦ç»†è¯Šæ–­æŠ¥å‘Š
openclaw status --all

# 3. ç½‘å…³çŠ¶æ€
openclaw gateway status

# 4. æ¨¡å‹çŠ¶æ€æ£€æŸ¥
openclaw models status

# 5. å®æ—¶æ—¥å¿—
tail -f $(ls -t /tmp/openclaw/openclaw-*.log | head -1)

# 6. è¿è¡Œä¿®å¤
dopenclaw doctor</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>å‚è€ƒèµ„æº</h2>
            
            <ul>
                <li>OpenClaw å®˜æ–¹æ–‡æ¡£: <a href="https://docs.openclaw.ai" target="_blank">docs.openclaw.ai</a></li>
                <li>å®˜æ–¹ FAQï¼ˆæ¨¡å‹ç›¸å…³ï¼‰: <a href="https://docs.openclaw.ai/help/faq#why-do-i-see-model-is-not-allowed-and-then-no-reply" target="_blank">docs.openclaw.ai/help/faq</a></li>
                <li>GitHub Issues: <a href="https://github.com/openclaw/openclaw/issues" target="_blank">github.com/openclaw/openclaw</a></li>
                <li>æ™ºè°± AI å¼€å‘è€…å¹³å°: <a href="https://open.bigmodel.cn/" target="_blank">open.bigmodel.cn</a></li>
                <li>Kimi å¼€å‘è€…å¹³å°: <a href="https://platform.moonshot.cn/" target="_blank">platform.moonshot.cn</a></li>
            </ul>
        </div>

        <footer>
            <p>ğŸ¾ ç”±å°çˆªæ•´ç†ç”Ÿæˆ Â· åŸºäº OpenClaw å®˜æ–¹æ–‡æ¡£ä¸å®é™…ä½¿ç”¨ç»éªŒ</p>
            <p>ç”Ÿæˆæ—¶é—´ï¼š2026å¹´2æœˆ11æ—¥ Â· æ–‡æ¡£ç‰ˆæœ¬ï¼šOpenClaw 2026.2.9</p>
        </footer>
    </div>
</body>
</html>
