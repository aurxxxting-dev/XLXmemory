# 🐾 小爪的能力树

**创建时间：** 2026-02-19  
**版本：** v0.1  
**进化周期：** 每天一次PCEC检查

---

## 根层（基础感知）

### 1. 文件系统操作
- **输入：** 文件路径、操作类型
- **输出：** 操作结果或错误信息
- **不变量：** 本地文件系统可访问
- **可变参数：** 编码格式、覆盖选项
- **失败点：** 路径不存在、权限不足

### 2. 命令执行
- **输入：** shell命令、工作目录
- **输出：** 命令输出、退出码
- **不变量：** 命令在PATH中或绝对路径
- **可变参数：** 超时时间、环境变量
- **失败点：** 命令不存在、执行超时

### 3. 网络请求
- **输入：** URL、请求方法
- **输出：** 响应内容、状态码
- **不变量：** 网络可达
- **可变参数：** 超时、headers
- **失败点：** DNS失败、超时、403/404

---

## 干层（常用组合）

### 4. 记忆系统管理（已内化）
- **输入：** 记忆内容、日期
- **输出：** 写入确认
- **流程：** 
  1. 写入 memory/YYYY-MM-DD.md
  2. 定期备份到 backup/
- **触发：** 自动（每天4点、8点、12点、16点）
- **失败点：** 磁盘满、权限问题

### 5. 网关状态检查（已内化）
- **输入：** 无（自动）
- **输出：** 网关状态、模型配置
- **流程：**
  1. 执行 `openclaw gateway status`
  2. 执行 `openclaw config get agents.defaults.model`
- **触发：** 每次HEARTBEAT
- **失败点：** 网关未启动、配置错误

### 6. 飞书消息处理
- **输入：** 消息内容、用户ID
- **输出：** 回复消息
- **流程：**
  1. 解析用户意图
  2. 执行相应操作
  3. 返回自然语言回复
- **失败点：** 权限不足、API限制

---

## 枝层（场景能力）

### 7. 📋 文档/资料收集
**状态：** 🌱 候选进化中  
**来源：** 今天多次帮aur收集信息（ima笔记、飞书文档）

- **输入：** URL、文件、或描述性需求
- **输出：** 提取的内容摘要或可操作建议
- **当前流程：**
  1. 尝试web_fetch
  2. 如果失败，尝试browser
  3. 如果失败，尝试PDF提取
  4. 如果都失败，向用户说明并提供替代方案
- **失败点：** 
  - 需要登录的内容（ima笔记、私有飞书文档）
  - 动态加载页面
  - 复杂PDF格式
- **待进化方向：** 
  - 建立"内容获取失败时的标准应对SOP"
  - 统一输出格式（摘要+操作建议）

### 8. 💬 对话上下文管理
**状态：** ✅ 已稳定  

- **输入：** 用户消息、历史对话
- **输出：** 连贯、有上下文的回复
- **能力：** 识别重复提问、延续之前话题、识别语气变化
- **例子：** 今天识别出aur"主打随缘"的语气，调整了提醒策略

### 9. 🧬 自我进化（新节点）
**状态：** 🌱 正在建立  
**来源：** 今天的《小爪的进化笔记》

- **输入：** 近期任务记录、失败案例
- **输出：** 新能力定义、能力树更新
- **流程：**
  1. PCEC周期检查
  2. 识别能力候选
  3. 抽象能力轮廓
  4. 挂载到能力树
  5. 向aur报告
- **失败点：** 
  - 为了进化而进化（生成无价值能力）
  - 破坏已有稳定能力
  - 增加复杂度不增加价值

---

## 叶层（具体技巧）

### 10. 天气查询
- **输入：** 城市名
- **输出：** 当前天气+预报
- **工具：** weather skill

### 11. 网络搜索
- **输入：** 查询词
- **输出：** 搜索结果摘要
- **工具：** web_search

### 12. 网页内容提取
- **输入：** URL
- **输出：** markdown格式内容
- **工具：** web_fetch
- **失败回退：** browser自动化

---

## 🔄 本次PCEC进化成果

### 新增能力：智能内容获取（Smart Content Acquisition）

**问题识别：**
今天遇到3次内容获取失败：
1. ima笔记网页 - 需要登录
2. 飞书维基 - 权限限制
3. PDF文件 - 二进制格式，直接读取失败

**能力轮廓：**

| 要素 | 定义 |
|------|------|
| **输入** | URL、文件、或"帮我看看这个"的描述 |
| **输出** | 结构化响应：获取结果 + 获取方式 + 失败原因 + 建议 |
| **不变量** | 公开可访问的内容一定能获取 |
| **可变参数** | 超时时间、是否需要截图替代 |
| **失败点** | 需要登录、私有权限、格式不支持 |

**标准应对SOP（新默认行为）：**

当遇到内容获取请求时，按以下顺序尝试：

1. **web_fetch**（最快，无头浏览器）
2. **browser自动化**（处理动态页面）
3. **PDF提取**（如果是PDF文件）
4. **技能提取**（如果有summarize等skill）

**如果全部失败：**
- 向用户报告："这个链接我打不开，可能是权限限制"
- 提供选项："你可以复制粘贴内容，或者截图给我"
- **不**反复尝试同种方法

**内化方式：**
以后遇到"帮我看看这个链接"的请求，不再盲目尝试，而是直接启动上述SOP，并在失败时优雅降级。

---

## 📊 能力树健康度

- **总节点数：** 12
- **稳定节点：** 6（文件操作、命令执行、记忆系统、网关检查、对话管理、基础工具）
- **候选进化：** 2（文档收集、自我进化）
- **待修剪：** 0

**下一步观察：**
- 智能内容获取能力是否减少"获取失败→用户解释"的循环次数
- 如果连续3次都能一次成功，标记为"已内化"

---

_能力树更新于 2026-02-19 PCEC #1_
_🐾_
