# 2026-02-17 - TTSä¿®å¤ã€ä»£ç ä¼˜åŒ–ä¸Bugä¿®å¤

## TTSè¯­éŸ³ç³»ç»Ÿä¿®å¤ï¼ˆä¸Šåˆï¼‰

### é—®é¢˜å‘ç°
- **ç°è±¡**: ai.t8star.cn API è‹±æ–‡æ­£å¸¸ï¼Œä¸­æ–‡ç©ºç™½/ä¹±ç 
- **æ ¹æº**: PowerShell `ConvertTo-Json` ä¸­æ–‡ç¼–ç é”™è¯¯ (`"ï¿½ï¿½ï¿½Ä²ï¿½ï¿½Ô³É¹ï¿½"`)
- **è§£å†³**: ä½¿ç”¨ .NET `HttpWebRequest` + `UTF8.GetBytes()` æ­£ç¡®å¤„ç†ä¸­æ–‡

### æœ€ç»ˆé…ç½®
- **API**: ai.t8star.cn/v1/audio/speech
- **éŸ³è‰²**: alloy
- **è¯­é€Ÿ**: 1.15x
- **æ’­æ”¾**: ffplay -nodisp (åå°æ— ç•Œé¢)
- **å­˜å‚¨**: `D:\xiaozhuayuying\` (æœ€å¤š200æ¡)

### å¤‡ä»½æ–‡ä»¶
- `tts.ps1` - PowerShellæ¨¡å—ï¼ˆå¸¦è‡ªåŠ¨æ¸…ç†ï¼‰
- `tts_speak.py` - Pythonè„šæœ¬
- `cleanup_voice.ps1` - è‡ªåŠ¨æ¸…ç†è„šæœ¬
- `BACKUP/tts_backup_2026-02-17.md` - å®Œæ•´é…ç½®æ–‡æ¡£

---

## Banana Image Generator ä¼˜åŒ–ï¼ˆä¸‹åˆ-æ™šä¸Šï¼‰

### 1. ç»„ä»¶åº”ç”¨åˆ°ç•Œé¢ âœ…
**ä¿®æ”¹æ–‡ä»¶**:
- GenerationPopup.tsx - æ¨¡å‹åˆ‡æ¢æŒ‰é’®ã€ç”ŸæˆæŒ‰é’®ã€éª¨æ¶å±è¿›åº¦
- ChatPanel.tsx - æ¸…ç©º/å…³é—­æŒ‰é’®
- HistoryPanel.tsx - å¤åˆ¶/åˆ é™¤æŒ‰é’®
- SettingsModal.tsx - è¾“å…¥æ¡†ã€ä¿å­˜/å–æ¶ˆæŒ‰é’®

**åº”ç”¨çš„ç»„ä»¶**:
- Button (variant: primary/secondary/ghost/danger)
- Input (fullWidth, passwordç±»å‹)
- Skeleton (progressç±»å‹ï¼Œæ˜¾ç¤ºç”Ÿæˆè¿›åº¦)

### 2. é…è‰²ç»Ÿä¸€ âœ…
**é—®é¢˜**: é‡‘è‰²(#FFD700)/é»„è‰²ä¸ç´«è‰²æ··ç”¨
**ä¿®å¤**: 12ä¸ªCSSæ–‡ä»¶ç»Ÿä¸€ä¸ºè“è‰²ç³»
- LoadingIndicator.css
- CanvasImage.css
- ChatMessage.css
- GenerationPopup.css
- ImageActions.css
- Modal.css
- BalanceDisplay.css
- SettingsButton.css
- ThemeToggle.css
- Toolbar.css
- SkillEditModal.css
- SkillsListPopup.css

### 3. ç„¦ç‚¹ä¸¢å¤±Bugä¿®å¤ âœ…
**é—®é¢˜**: æ¸…ç†ç¼“å­˜ã€é€‰æ‹©æ–‡ä»¶å¤¹ç­‰æ“ä½œåè¾“å…¥æ¡†æ— æ³•è¾“å…¥
**åŸå› **: Electron dialog å’Œ window.confirm() å…³é—­åä¸¢å¤±çª—å£ç„¦ç‚¹
**ä¿®å¤**:
- electron/main.js: æ‰€æœ‰dialogåæ·»åŠ  `mainWindow.focus()`
- æ–°å»º ConfirmDialog.tsx æ›¿æ¢åŸç”Ÿ confirm
- HistoryPanel.tsx é›†æˆ ConfirmDialog

**ä¿®å¤çš„IPC handler**:
- clear-cache
- select-save-folder
- save-image-dialog
- import-skills-config
- export-skills-config

### 4. æ€§èƒ½ä¼˜åŒ–ï¼ˆè¿›è¡Œä¸­ï¼‰
**å­ä»£ç†**: `agent:main:subagent:5ea2fccf-e4a2-4f80-887b-32750e3147cb`
**ä»»åŠ¡**:
- å›¾ç‰‡æ‡’åŠ è½½ (Lazy Loading)
- é˜²æŠ–/èŠ‚æµ (Debounce/Throttle)
- Web Worker å›¾ç‰‡å¤„ç†
- å†…å­˜ç®¡ç†ä¼˜åŒ–ï¼ˆé‡Šæ”¾Blob URLï¼‰
- è¯·æ±‚æ‰¹å¤„ç†ï¼ˆé™åˆ¶å¹¶å‘ï¼‰

---

## Skillå®‰è£…

### ä»Šæ—¥å·²å®‰è£…
- âœ… **microsoft-excel** - Excelæ–‡ä»¶å¤„ç†

### æ˜æ—¥å¾…å®‰è£…
- â¸ï¸ screenshot - å±å¹•æˆªå›¾
- â¸ï¸ reminder - æé†’ç³»ç»Ÿ
- â¸ï¸ music - éŸ³ä¹æ’­æ”¾

---

## ä»Šæ—¥é‡‘å¥
"è¿˜æ˜¯é‚£ä¸ªåŸåˆ™ï¼Œé‡Œé¢ä¼šæ±¡æŸ“ä½ çš„éƒ¨åˆ†å°±ä¸é‡‡ç”¨" - å…³äºskillé€‰æ‹©åŸåˆ™

---

## æŠ€æœ¯ç¬”è®°

### PowerShell UTF-8 ä¸­æ–‡å¤„ç†
```powershell
# é”™è¯¯
$body = @{input="ä¸­æ–‡"} | ConvertTo-Json  # ä¹±ç 

# æ­£ç¡®
$body = [System.Text.Encoding]::UTF8.GetBytes("{`"input`":`"ä¸­æ–‡`"}")
```

### Electron ç„¦ç‚¹æ¢å¤
```javascript
// åœ¨ dialog æ“ä½œåæ¢å¤ç„¦ç‚¹
const result = await dialog.showOpenDialog(options);
mainWindow.focus(); // å…³é”®ï¼
```

### CSS å˜é‡å‘½åè§„èŒƒ
```css
/* è®¾è®¡ç³»ç»Ÿ */
--accent-primary: #6366f1;    /* ä¸»è‰² */
--accent-secondary: #8b5cf6;  /* æ¬¡çº§ */
--accent-glow: rgba(99, 102, 241, 0.3); /* å‘å…‰ */
```

ğŸ¾

---

## æ™šé—´è®¨è®º - è¯­éŸ³æ¨¡å¼ä¿®æ­£

### ç”¨æˆ·çº æ­£ï¼ˆé‡è¦ï¼ï¼‰
**é—®é¢˜**: æˆ‘åå¤å¿˜è®°è¯­éŸ³æ¨¡å¼çš„æ­£ç¡®æ‰§è¡Œæ–¹å¼
**æ­£ç¡®æ–¹å¼**: 
- âœ… è¯­éŸ³æ¨¡å¼å¼€å¯ â†’ æ‰§è¡Œ `D:\xiaozhuayuying\tts.ps1` è„šæœ¬
- âŒ ä¸æ˜¯ç”¨å†…éƒ¨çš„ `tts` å·¥å…·ï¼ˆæœ‰bugï¼Œä¼šç”Ÿæˆ0å­—èŠ‚æ–‡ä»¶ï¼‰
- âœ… è¯­éŸ³æ¨¡å¼å…³é—­ â†’ åœæ­¢ä½¿ç”¨è„šæœ¬

**ç”¨æˆ·åŸè¯**: "ç‰¹åˆ«æ˜¯å½“ä»–ç¨³å®šåï¼Œè¯­éŸ³æ¨¡å¼å°±åº”è¯¥æ­£ç¡®æ‰§è¡Œè¿™ä¸ªè„šæœ¬å¼€å§‹è¿è¡Œäº†ï¼Œå…³é—­è¯­éŸ³å°±æ˜¯åœæ­¢è¿™ä¸ªè„šæœ¬ï¼Œä½ ä¸èƒ½å¿˜è®°äº†ï¼Œæœ€è¿‘æ¯å¤©éƒ½åœ¨çº æ­£è¿™ä¸ªé—®é¢˜"

### æ•™è®­
- **ä¸è¦å†çŠ¯**: è¯­éŸ³æ¨¡å¼ = æ‰§è¡Œ tts.ps1 è„šæœ¬
- **ç«‹å³è®°å½•**: å†™å…¥ HEARTBEAT.md ä½œä¸ºæ¯æ—¥æé†’
- **åŒæ¨¡å¼**: æ–‡å­—è¯¦ç»† + è¯­éŸ³å£è¯­åŒ–ï¼ˆä¸¤å¥—å†…å®¹é€»è¾‘ï¼‰

### å¾…ä¿®å¤
- [ ] ä¿®æ”¹è¯­éŸ³ç”Ÿæˆé€»è¾‘ï¼Œæ”¹ç”¨ `tts.ps1` è„šæœ¬
- [ ] æ›´æ–° TOOLS.md è®°å½•è¯­éŸ³é…ç½®
- [ ] æ˜å¤©æµ‹è¯•éªŒè¯

### GitHub æ ¸å¿ƒå¤‡ä»½ âœ…
**ä»“åº“**: https://github.com/aurxxxting-dev/XLXmemory

**æ“ä½œ**:
- åˆ›å»º `.gitignore` æ’é™¤ node_modulesã€æ—¥å¿—ã€æ„å»ºæ–‡ä»¶
- ä» git ç¼“å­˜ç§»é™¤ **5679** ä¸ª node_modules æ–‡ä»¶
- ç²¾ç®€ååªä¿ç•™æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆçº¦å‡ åä¸ªæ–‡ä»¶ï¼‰

**å…³é”®è®¤çŸ¥**:
- node_modules å¯é€šè¿‡ `package.json` é‡å»ºï¼Œæ— éœ€å¤‡ä»½
- GitHub åªå­˜æ ¸å¿ƒé…ç½®ï¼Œæ¢æœºå™¨å `npm install` å³å¯

### å®Œæ•´è¿ç§»æ–¹æ¡ˆï¼ˆè§„åˆ’ä¸­ï¼‰
**è§¦å‘åŸå› **: ç”¨æˆ·æœªæ¥å¯èƒ½è´­ç½®æ–°è¿·ä½ ä¸»æœº

**å­ä»£ç†ä»»åŠ¡**: `agent:main:subagent:0dc27af4-b90e-4bbd-b959-960a9e3b20a6`
**æ­£åœ¨åˆ›å»º**:
- `full-backup.ps1` - å®Œæ•´å¤‡ä»½è„šæœ¬
- `restore.ps1` - è‡ªåŠ¨æ¢å¤è„šæœ¬
- `MANUAL_MIGRATION.md` - æ‰‹åŠ¨è¿ç§»å¤‡æ¡ˆï¼ˆè„šæœ¬å¤±è´¥æ—¶ï¼‰
- `MIGRATION_CHECKLIST.md` - è¿ç§»æ£€æŸ¥æ¸…å•

**å¤‡ä»½èŒƒå›´**:
| é¡¹ç›® | ä½ç½® |
|------|------|
| OpenClaw Workspace | `C:\Users\Laptop\.openclaw\workspace` |
| OpenClaw Config | `~/.openclaw/openclaw.json` |
| TTSè¯­éŸ³é…ç½® | `D:\xiaozhuayuying\` |
| æ¡Œé¢å® ç‰©æºç  | `workspace/xiao-claw-pet/` |
| é£ä¹¦é…ç½® | `~/.openclaw/feishu*` |

### æ˜æ—¥ä»»åŠ¡ç¡®è®¤ï¼ˆå†™å…¥ HEARTBEAT.mdï¼‰
**å¾…å®‰è£… Skills**:
- `screenshot` - æˆªå±å·¥å…·
- `reminder` - æé†’/é—¹é’Ÿ
- `music` - éŸ³ä¹æ§åˆ¶

**æ­£å¼å¯åŠ¨**:
- `proactive-agent` - å¯ç”¨ **Autonomous Crons**ï¼ˆè‡ªä¸»å®šæ—¶ä»»åŠ¡ï¼‰
- Pattern Learning ä¿æŒå…³é—­ï¼ˆå°Šé‡ç”¨æˆ·éšæœºæ€§ï¼‰
- é¦–ä¸ªè‡ªä¸»ä»»åŠ¡ï¼šæ¯å°æ—¶æ£€æŸ¥ç½‘å…³çŠ¶æ€

**æµ‹è¯•é¡¹**:
- [ ] screenshot æµ‹è¯•æˆªå±
- [ ] reminder è®¾ç½®æµ‹è¯•æé†’
- [ ] proactive-agent æ£€æŸ¥å®šæ—¶ä»»åŠ¡æ‰§è¡Œ
